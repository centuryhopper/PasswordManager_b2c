@page "/authentication/{action}"
@using Microsoft.AspNetCore.Components.WebAssembly.Authentication

<RemoteAuthenticatorView Action="@Action" OnLogInSucceeded="OnLogInSucceeded"
OnLogOutSucceeded="OnLogOutSucceeded"/>

@code{
    [Parameter] public string? Action { get; set; }
    [Inject] IAuthService authorize {get;set;}
    [Inject] NavigationManager navManager {get;set;}
    [Inject] ILocalStorageService localStorageService {get;set;}

    private void OnLogInSucceeded()
    {
        authorize.EstablishClaimsFromAAD();
        navManager.NavigateTo("passwords");
    }

    private async void OnLogOutSucceeded()
    {
        await localStorageService.ClearAsync();
    }
}
